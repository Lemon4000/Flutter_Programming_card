# Flutter + HDC å¼€å‘å·¥ä½œæµç¨‹æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿å·²å®Œæˆä»¥ä¸‹æ­¥éª¤ï¼š

```bash
# ä½¿HDCç¯å¢ƒå˜é‡ç”Ÿæ•ˆ
source ~/.bashrc

# éªŒè¯HDCå®‰è£…
hdc -v

# æ£€æŸ¥è®¾å¤‡è¿æ¥
hdc list targets
```

åº”è¯¥çœ‹åˆ°æ‚¨çš„è®¾å¤‡IDï¼š`33Z0224620027607`

### 2. ä½¿ç”¨éƒ¨ç½²è„šæœ¬

æˆ‘å·²ç»ä¸ºæ‚¨åˆ›å»ºäº†ä¸€ä¸ªè‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼š`flutter-hdc-deploy.sh`

#### åŸºæœ¬ç”¨æ³•

```bash
# æ„å»ºå¹¶éƒ¨ç½²debugç‰ˆæœ¬ï¼ˆæœ€å¸¸ç”¨ï¼‰
./flutter-hdc-deploy.sh deploy

# æ„å»ºå¹¶éƒ¨ç½²releaseç‰ˆæœ¬
./flutter-hdc-deploy.sh deploy --release

# åªæ„å»ºï¼Œä¸å®‰è£…
./flutter-hdc-deploy.sh build

# åªå®‰è£…å·²æ„å»ºçš„APK
./flutter-hdc-deploy.sh install

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—ï¼ˆå¦‚æœå¯ç”¨ï¼‰
./flutter-hdc-deploy.sh log

# åˆ—å‡ºè¿æ¥çš„è®¾å¤‡
./flutter-hdc-deploy.sh devices

# æ¸…ç†æ„å»ºæ–‡ä»¶
./flutter-hdc-deploy.sh clean

# æŸ¥çœ‹å¸®åŠ©
./flutter-hdc-deploy.sh help
```

## ğŸ“‹ å®Œæ•´å¼€å‘æµç¨‹

### æ–¹æ¡ˆAï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

#### æ­¥éª¤1ï¼šå¼€å‘ä»£ç 

åœ¨æ‚¨å–œæ¬¢çš„ç¼–è¾‘å™¨ä¸­ç¼–å†™Flutterä»£ç ã€‚

#### æ­¥éª¤2ï¼šæ„å»ºå¹¶éƒ¨ç½²

```bash
./flutter-hdc-deploy.sh deploy
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. âœ… æ£€æŸ¥è®¾å¤‡è¿æ¥
2. âœ… æ„å»ºFlutter APK
3. âœ… å®‰è£…åˆ°è®¾å¤‡
4. âœ… æ˜¾ç¤ºä¸‹ä¸€æ­¥æç¤º

#### æ­¥éª¤3ï¼šæµ‹è¯•åº”ç”¨

1. åœ¨è®¾å¤‡ä¸Šæ‰‹åŠ¨å¯åŠ¨åº”ç”¨
2. æµ‹è¯•åŠŸèƒ½
3. è§‚å¯Ÿè¡Œä¸º

#### æ­¥éª¤4ï¼šæŸ¥çœ‹æ—¥å¿—ï¼ˆå¯é€‰ï¼‰

```bash
./flutter-hdc-deploy.sh log
```

æ³¨æ„ï¼šç”±äºHDCç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ï¼Œæ—¥å¿—åŠŸèƒ½å¯èƒ½å—é™ã€‚

#### æ­¥éª¤5ï¼šä¿®æ”¹ä»£ç å¹¶é‡æ–°éƒ¨ç½²

```bash
# ä¿®æ”¹ä»£ç å
./flutter-hdc-deploy.sh deploy
```

### æ–¹æ¡ˆBï¼šæ‰‹åŠ¨æ“ä½œ

å¦‚æœæ‚¨æƒ³æ‰‹åŠ¨æ§åˆ¶æ¯ä¸ªæ­¥éª¤ï¼š

#### 1. æ„å»ºAPK

```bash
# Debugç‰ˆæœ¬ï¼ˆå¼€å‘æ—¶ä½¿ç”¨ï¼‰
flutter build apk --debug

# Releaseç‰ˆæœ¬ï¼ˆå‘å¸ƒæ—¶ä½¿ç”¨ï¼‰
flutter build apk --release

# Profileç‰ˆæœ¬ï¼ˆæ€§èƒ½åˆ†ææ—¶ä½¿ç”¨ï¼‰
flutter build apk --profile
```

æ„å»ºäº§ç‰©ä½ç½®ï¼š
- Debug: `build/app/outputs/flutter-apk/app-debug.apk`
- Release: `build/app/outputs/flutter-apk/app-release.apk`
- Profile: `build/app/outputs/flutter-apk/app-profile.apk`

#### 2. å®‰è£…åˆ°è®¾å¤‡

```bash
# å®‰è£…debugç‰ˆæœ¬
hdc install -r build/app/outputs/flutter-apk/app-debug.apk

# å®‰è£…releaseç‰ˆæœ¬
hdc install -r build/app/outputs/flutter-apk/app-release.apk
```

å‚æ•°è¯´æ˜ï¼š
- `-r`: æ›¿æ¢å·²å®‰è£…çš„åº”ç”¨ï¼ˆä¿ç•™æ•°æ®ï¼‰

#### 3. å¯åŠ¨åº”ç”¨

åœ¨è®¾å¤‡ä¸Šæ‰‹åŠ¨ç‚¹å‡»åº”ç”¨å›¾æ ‡å¯åŠ¨ã€‚

#### 4. æŸ¥çœ‹æ—¥å¿—ï¼ˆå¦‚æœå¯ç”¨ï¼‰

```bash
# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
hdc hilog

# è¿‡æ»¤Flutterç›¸å…³æ—¥å¿—
hdc hilog | grep -i flutter

# è¿‡æ»¤ç‰¹å®šæ ‡ç­¾
hdc hilog | grep -i "YourAppTag"
```

#### 5. å¸è½½åº”ç”¨

```bash
# å¸è½½åº”ç”¨ï¼ˆéœ€è¦çŸ¥é“åŒ…åï¼‰
hdc uninstall com.example.your_app

# å¸è½½å¹¶ä¿ç•™æ•°æ®
hdc uninstall -k com.example.your_app
```

## ğŸ”§ å¸¸ç”¨æ“ä½œ

### æ–‡ä»¶ä¼ è¾“

è™½ç„¶æ–‡ä»¶ä¼ è¾“å‘½ä»¤å¯èƒ½å—ç‰ˆæœ¬é™åˆ¶ï¼Œä½†æ‚¨å¯ä»¥å°è¯•ï¼š

```bash
# æ¨é€æ–‡ä»¶åˆ°è®¾å¤‡
hdc file send <æœ¬åœ°æ–‡ä»¶> /data/local/tmp/<æ–‡ä»¶å>

# ä»è®¾å¤‡æ‹‰å–æ–‡ä»¶
hdc file recv /data/local/tmp/<æ–‡ä»¶å> <æœ¬åœ°è·¯å¾„>
```

### è®¾å¤‡ä¿¡æ¯

```bash
# åˆ—å‡ºè®¾å¤‡
hdc list targets

# é‡å¯è®¾å¤‡
hdc target boot

# é‡å¯åˆ°recoveryæ¨¡å¼
hdc target boot -recovery
```

### ç«¯å£è½¬å‘

```bash
# è½¬å‘æœ¬åœ°ç«¯å£åˆ°è®¾å¤‡
hdc fport tcp:8080 tcp:8080

# æŸ¥çœ‹è½¬å‘åˆ—è¡¨
hdc fport ls

# åˆ é™¤è½¬å‘
hdc fport rm tcp:8080
```

## ğŸ’¡ å¼€å‘æŠ€å·§

### 1. å¿«é€Ÿè¿­ä»£

åˆ›å»ºä¸€ä¸ªåˆ«åç®€åŒ–å‘½ä»¤ï¼š

```bash
# æ·»åŠ åˆ° ~/.bashrc
alias fdeploy='./flutter-hdc-deploy.sh deploy'
alias flog='./flutter-hdc-deploy.sh log'

# ä½¿ç”¨
source ~/.bashrc
fdeploy
```

### 2. è°ƒè¯•ç­–ç•¥

ç”±äºæ— æ³•ä½¿ç”¨çƒ­é‡è½½ï¼Œå»ºè®®ï¼š

1. **åœ¨Linuxæ¡Œé¢ä¸Šå¼€å‘**ï¼š
   ```bash
   flutter run -d linux
   ```
   - å¿«é€Ÿè¿­ä»£
   - å®Œæ•´çš„è°ƒè¯•åŠŸèƒ½
   - çƒ­é‡è½½å¯ç”¨

2. **å®šæœŸåœ¨è®¾å¤‡ä¸Šæµ‹è¯•**ï¼š
   ```bash
   ./flutter-hdc-deploy.sh deploy
   ```
   - éªŒè¯è®¾å¤‡ç‰¹å®šåŠŸèƒ½
   - æµ‹è¯•æ€§èƒ½
   - æ£€æŸ¥UIé€‚é…

3. **ä½¿ç”¨æ—¥å¿—è°ƒè¯•**ï¼š
   ```dart
   // åœ¨ä»£ç ä¸­æ·»åŠ æ—¥å¿—
   print('Debug: å˜é‡å€¼ = $value');
   debugPrint('è°ƒè¯•ä¿¡æ¯');
   ```

### 3. ç‰ˆæœ¬ç®¡ç†

ä¸ºä¸åŒç‰ˆæœ¬åˆ›å»ºä¸åŒçš„æ„å»ºï¼š

```bash
# å¼€å‘ç‰ˆæœ¬
./flutter-hdc-deploy.sh deploy --debug

# æµ‹è¯•ç‰ˆæœ¬
./flutter-hdc-deploy.sh deploy --profile

# å‘å¸ƒç‰ˆæœ¬
./flutter-hdc-deploy.sh deploy --release
```

### 4. æ€§èƒ½ä¼˜åŒ–

Profileæ¨¡å¼ç”¨äºæ€§èƒ½åˆ†æï¼š

```bash
# æ„å»ºprofileç‰ˆæœ¬
./flutter-hdc-deploy.sh deploy --profile

# åœ¨è®¾å¤‡ä¸Šè¿è¡Œå¹¶è§‚å¯Ÿæ€§èƒ½
```

## âš ï¸ å·²çŸ¥é™åˆ¶

ç”±äºHDCç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ï¼Œä»¥ä¸‹åŠŸèƒ½å¯èƒ½å—é™ï¼š

1. **Shellè®¿é—®**ï¼š`hdc shell` å‘½ä»¤ä¸å¯ç”¨
2. **æ–‡ä»¶ä¼ è¾“**ï¼šå¯èƒ½éœ€è¦ç‰¹å®šæƒé™
3. **æ—¥å¿—æŸ¥çœ‹**ï¼š`hdc hilog` å¯èƒ½å—é™
4. **å®æ—¶è°ƒè¯•**ï¼šæ— æ³•ä½¿ç”¨Flutter DevTools

### è§£å†³æ–¹æ¡ˆ

1. **ä½¿ç”¨åº”ç”¨å†…æ—¥å¿—**ï¼š
   - åœ¨åº”ç”¨ä¸­å®ç°æ—¥å¿—æ”¶é›†
   - å°†æ—¥å¿—å†™å…¥æ–‡ä»¶
   - ä½¿ç”¨ `hdc file recv` æ‹‰å–æ—¥å¿—æ–‡ä»¶

2. **ä½¿ç”¨ç½‘ç»œè°ƒè¯•**ï¼š
   - åœ¨åº”ç”¨ä¸­å¯åŠ¨HTTPæœåŠ¡å™¨
   - é€šè¿‡æµè§ˆå™¨æŸ¥çœ‹æ—¥å¿—å’ŒçŠ¶æ€

3. **ä½¿ç”¨è®¾å¤‡å±å¹•å½•åˆ¶**ï¼š
   - å½•åˆ¶æ“ä½œè¿‡ç¨‹
   - åˆ†æé—®é¢˜

## ğŸ“Š å¼€å‘æµç¨‹å¯¹æ¯”

### ä¼ ç»ŸFlutterå¼€å‘ï¼ˆä½¿ç”¨ADBï¼‰

```bash
flutter run -d <device-id>
# âœ… è‡ªåŠ¨å®‰è£…
# âœ… çƒ­é‡è½½
# âœ… å®æ—¶æ—¥å¿—
# âœ… DevToolsæ”¯æŒ
```

### HDCå¼€å‘æµç¨‹ï¼ˆå½“å‰æ–¹æ¡ˆï¼‰

```bash
./flutter-hdc-deploy.sh deploy
# âœ… è‡ªåŠ¨æ„å»ºå’Œå®‰è£…
# âŒ æ— çƒ­é‡è½½
# âš ï¸ æ—¥å¿—å—é™
# âŒ æ— DevTools
```

### æ··åˆå¼€å‘æµç¨‹ï¼ˆæ¨èï¼‰

```bash
# å¼€å‘é˜¶æ®µï¼šåœ¨Linuxæ¡Œé¢ä¸Š
flutter run -d linux
# âœ… å¿«é€Ÿè¿­ä»£
# âœ… å®Œæ•´è°ƒè¯•

# æµ‹è¯•é˜¶æ®µï¼šåœ¨è®¾å¤‡ä¸Š
./flutter-hdc-deploy.sh deploy
# âœ… çœŸå®ç¯å¢ƒæµ‹è¯•
# âœ… è®¾å¤‡ç‰¹å®šåŠŸèƒ½éªŒè¯
```

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šè®¾å¤‡æœªæ‰¾åˆ°

```bash
# æ£€æŸ¥USBè¿æ¥
lsusb | grep Huawei

# æ£€æŸ¥HDCè¿æ¥
hdc list targets

# é‡å¯HDCæœåŠ¡
hdc kill
hdc start
```

### é—®é¢˜2ï¼šå®‰è£…å¤±è´¥

```bash
# å°è¯•å¸è½½æ—§ç‰ˆæœ¬
hdc uninstall com.example.your_app

# é‡æ–°å®‰è£…
./flutter-hdc-deploy.sh install
```

### é—®é¢˜3ï¼šåº”ç”¨å´©æºƒ

1. åœ¨Linuxæ¡Œé¢ä¸Šè¿è¡ŒæŸ¥çœ‹é”™è¯¯ï¼š
   ```bash
   flutter run -d linux
   ```

2. æ£€æŸ¥åº”ç”¨æƒé™é…ç½®

3. æŸ¥çœ‹æ„å»ºæ—¥å¿—ï¼š
   ```bash
   flutter build apk --debug -v
   ```

### é—®é¢˜4ï¼šç‰ˆæœ¬å…¼å®¹æ€§è­¦å‘Š

è¿™æ˜¯æ­£å¸¸çš„ï¼Œä¸å½±å“åŸºæœ¬åŠŸèƒ½ã€‚å¦‚æœéœ€è¦å®Œæ•´åŠŸèƒ½ï¼š

1. å°è¯•åœ¨è®¾å¤‡ä¸Šå¯ç”¨ADBæ¨¡å¼
2. æˆ–ç­‰å¾…SDKæ›´æ–°
3. æˆ–ä½¿ç”¨DevEco Studio

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `HDC_TROUBLESHOOTING.md` - å®Œæ•´çš„æ•…éšœæ’é™¤æŒ‡å—
- `HDC_USAGE_GUIDE.md` - HDCå‘½ä»¤è¯¦è§£
- `enable_adb_on_harmonyos.md` - ADBæ¨¡å¼å¯ç”¨æŒ‡å—

## ğŸ¯ æœ€ä½³å®è·µ

1. **å¼€å‘æ—¶**ï¼š
   - åœ¨Linuxæ¡Œé¢ä¸Šå¼€å‘ï¼ˆ`flutter run -d linux`ï¼‰
   - å¿«é€Ÿè¿­ä»£å’Œè°ƒè¯•

2. **æµ‹è¯•æ—¶**ï¼š
   - å®šæœŸåœ¨è®¾å¤‡ä¸Šæµ‹è¯•ï¼ˆ`./flutter-hdc-deploy.sh deploy`ï¼‰
   - éªŒè¯è®¾å¤‡ç‰¹å®šåŠŸèƒ½

3. **å‘å¸ƒå‰**ï¼š
   - æ„å»ºreleaseç‰ˆæœ¬ï¼ˆ`./flutter-hdc-deploy.sh deploy --release`ï¼‰
   - å®Œæ•´æµ‹è¯•æ‰€æœ‰åŠŸèƒ½

4. **æ—¥å¿—è®°å½•**ï¼š
   - åœ¨ä»£ç ä¸­æ·»åŠ è¯¦ç»†æ—¥å¿—
   - ä½¿ç”¨ä¸åŒçº§åˆ«ï¼ˆdebug, info, errorï¼‰

5. **ç‰ˆæœ¬æ§åˆ¶**ï¼š
   - æäº¤å‰åœ¨è®¾å¤‡ä¸Šæµ‹è¯•
   - è®°å½•è®¾å¤‡æµ‹è¯•ç»“æœ

## ğŸš€ ä¸‹ä¸€æ­¥

ç°åœ¨æ‚¨å¯ä»¥ï¼š

1. âœ… ä½¿ç”¨ `./flutter-hdc-deploy.sh deploy` éƒ¨ç½²åº”ç”¨
2. âœ… åœ¨è®¾å¤‡ä¸Šæµ‹è¯•åŠŸèƒ½
3. âœ… ä½¿ç”¨æ··åˆå¼€å‘æµç¨‹æé«˜æ•ˆç‡

å¼€å§‹å¼€å‘å§ï¼å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·å‚è€ƒæ•…éšœæ’é™¤éƒ¨åˆ†æˆ–æŸ¥çœ‹ç›¸å…³æ–‡æ¡£ã€‚
